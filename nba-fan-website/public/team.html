<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NBA Teams</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/styles.css"/>
</head>
<body>
    <!-- Navigation Menu -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">NBA Fan Website</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="search.html">Search Players</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="team.html">Teams</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="top-shooters.html">Top Shooters</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="playerPerformance.html">Player Performance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="shot.html">Shot Performance</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-4">
        <h1>NBA Teams</h1>
        <div id="teams-list" class="row"></div>

        <h2 id="team-stats-title" class="mt-4"></h2>
        <table class="table table-striped" id="team-stats-table">
            <thead>
                <tr>
                    <th>Season</th>
                    <th>Field Goal %</th>
                    <th>Three Point %</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="js/team.js"></script>
    <script>
    // Fetch and display three-point percentages for all teams
        async function fetchThreePointPercentages() {
            try {
                // Fetch data from the backend API
                const response = await fetch('/api/team/three-point-percentages/all');
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();

                // Get the table body element
                const tableBody = document.getElementById('three-point-stats-body');
                tableBody.innerHTML = ''; // Clear any existing rows

                // Populate the table with data
                data.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${row.team}</td>
                        <td>${row.season}</td>
                        <td>${row.three_pt_percentages.toFixed(2)}%</td>
                    `;
                    tableBody.appendChild(tr);
                });
            } catch (error) {
                console.error('Error fetching three-point percentages:', error);
            }
        }
        // Call the function when the page loads
        document.addEventListener('DOMContentLoaded', fetchThreePointPercentages);
    </script>
</body>
</html>
